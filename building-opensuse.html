<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>openSUSE: Engineering Stable Rolling Releases with OBS and openQA</title>
<meta name="author" content="Dan ƒåerm√°k"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="./node_modules/reveal.js/dist/reveal.css"/>

<link rel="stylesheet" href="./node_modules/reveal.js/dist/theme/simple.css" id="theme"/>

<link rel="stylesheet" href="./node_modules/@fortawesome/fontawesome-free/css/all.min.css"/>

<link rel="stylesheet" href="./custom-style.css"/>
<link rel="stylesheet" href="./node_modules/reveal.js/plugin/highlight/zenburn.css"/>
<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = './node_modules/reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h2 class="title">openSUSE: Engineering Stable Rolling Releases with OBS and openQA</h2>
<p class="subtitle" style="color: Gray;"></p>
<p class="author">Dan ƒåerm√°k</p>
<div style="float:left"><a href="https://fosdem.org/2025/" target="_blank"><img src="./media/FOSDEM_logo.svg" height="50px" style="margin-bottom:-12px"/> FOSDEM 2025</a></div>
<div style="float:right;font-size:35px;"><p xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#"><a href="https://creativecommons.org/licenses/by/4.0" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">
CC BY 4.0 <i class="fab fa-creative-commons"></i> <i class="fab fa-creative-commons-by"></i></a></p></div>
</section>

<section>
<section id="slide-org2682cbd">
<h2 id="org2682cbd">who -u</h2>
<p>
Dan ƒåerm√°k
</p>

<p>
 <div style="float:center">
 <table class="who-table">
 <tr><td><i class="fab fa-suse"></i></td><td> Software Developer @SUSE, SLE BCI Releng</td></tr>
 <tr><td><i class="fab fa-fedora"></i></td><td> i3 SIG, Package maintainer</td></tr>
 <tr><td><i class="far fa-heart"></i></td><td> Developer Tools, Testing and Documentation, Home Automation</td></tr>
 <tr></tr>
 <tr></tr>
 <tr><td><i class="fa-solid fa-globe"></i></td><td> <a href="https://dancermak.name/">https://dancermak.name</a></td></tr>
 <tr><td><i class="fab fa-github"></i></td><td> <a href="https://github.com/dcermak/">dcermak</a></td></tr>
 <tr><td><i class="fab fa-mastodon"></i></td><td> <a href="https://mastodon.social/@Defolos">@Defolos@mastodon.social</a></td></tr>
 </table>
 </div>
</p>


</section>
</section>
<section>
<section id="slide-org46c2a5d">
<h2 id="org46c2a5d">Why openSUSE?</h2>
<aside class="notes">
<ul>
<li>small distribution</li>
<li>unique tech stack</li>
<li>very different build system</li>

</ul>

</aside>

<p class="fragment (appear)">
<img src="./media/distrowatch-opensuse.png"/>
</p>


<ul>
<li class="fragment appear">RPM based distribution</li>
<li class="fragment appear">unique tech stack: OBS, openQA, zypper</li>

</ul>


</section>
<section id="slide-orgb6a31af">
<h3 id="orgb6a31af">There's a lot of openSUSE</h3>
<ul>
<li class="fragment appear">Tumbleweed</li>
<li class="fragment appear">MicroOS</li>
<li class="fragment appear">Aeon</li>
<li class="fragment appear">Kalpa</li>
<li class="fragment appear">Slow Roll</li>
<li class="fragment appear">Leap</li>
<li class="fragment appear">Leap Micro</li>

</ul>


</section>
</section>
<section>
<section id="slide-org6ea3e20">
<h2 id="org6ea3e20">The Open Build Service</h2>
<p class="fragment (appear)">
<img src="./media/obs-overview.svg"/>
</p>


</section>
<section id="slide-org41ea229">
<h3 id="org41ea229">Projects &amp; Packages</h3>
<p>
<img src="./media/obs-devel_microos.png"/>
</p>

</section>
<section id="slide-org41ea229-split">

<p class="fragment (appear)">
<img src="./media/docker-in-obs.png"/>
</p>

</section>
<section id="slide-org41ea229-split">
<p>
<img src="./media/linux-distro-build-pipeline.svg"/>
</p>

</section>
<section id="slide-org41ea229-split">
<p>
<img src="./media/linux-distro-build-pipeline-openSUSE.svg"/>
</p>

</section>
<section id="slide-org41ea229-split">

<p>
<img src="./media/obs-architecture.svg"/>
</p>

</section>
<section id="slide-org41ea229-split">

<p>
<img src="./media/obs-cross-project.svg"/>
</p>


</section>
<section id="slide-orgf13e3b7">
<h3 id="orgf13e3b7">Automated Rebuilds</h3>
<aside class="notes">
<ul>
<li>dependency graph calculated from inspecting sources</li>
<li>dependency resolution is <b>not</b> using the package manager &rArr; can happen on the backend &amp; omit srpm creation</li>
<li>death: dynamic buildrequires</li>
<li>works accross different build types (rpms &rarr; disk images or rpms &rarr; container &rarr; container)</li>

</ul>

</aside>

<p class="fragment (appear)">
<img src="./media/scheduler-obs.svg"/>
</p>


</section>
<section id="slide-org128ebdf">
<h3 id="org128ebdf"><code>prjconf</code></h3>
<aside class="notes">
<ul>
<li>set stuff like repo types (rpm, docker, image, etc.)
or build flags</li>
<li>allows to completely override all macros &rArr; in Fedora that's done via
<code>redhat-rpm-config</code> &amp; <code>srpm-*-macros-*</code> packages
&rArr; much more flexibility per project</li>

</ul>

</aside>

<ul>
<li data-fragment-index="1" class="fragment appear">configure project building &amp; publishing</li>
<li data-fragment-index="2" class="fragment appear">tweak macros &amp; dependencies of a project</li>

</ul>

<pre  class="fragment appear" data-fragment-index="3" >
BuildFlags: sbom:spdx
PublishFlags: withsbom
Macros:
%suse_version 1699
%is_opensuse 1
%build_ldflags %{?_lto_cflags}
:Macros
</pre>


</section>
<section id="slide-org10f93d7">
<h3 id="org10f93d7"><code>_link</code></h3>
<p class="fragment (appear)">
<img src="./media/links.svg"/>
</p>


</section>
<section id="slide-org4f3f438">
<h3 id="org4f3f438">Repository Assembly?</h3>
<aside class="notes">
<ul>
<li>only ship what's required</li>
<li>remove obsolete packages</li>
<li>patchinfo creation</li>
<li>deltarpms</li>

</ul>

<p>
surprisingly not in OBS &rArr; hacked together via <code>000package-groups</code> and releases
using opensuse-release-tools to <code>000product</code> and <code>000release-packages</code>
</p>

</aside>

<p class="fragment (appear)">
<img src="./media/repocreate.svg"/>
</p>

</section>
<section id="slide-org4f3f438-split">

<p class="fragment (appear)">
<img src="./media/opensuse-release-tools.svg"/>
</p>


</section>
</section>
<section>
<section id="slide-org108ac1d">
<h2 id="org108ac1d">Test automation</h2>
<aside class="notes">
<ul>
<li>test automation performed using openQA</li>

</ul>

</aside>

<p class="fragment (appear)">
Run the installer every night?
</p>
<p class="fragment (appear)">
Ain't nobody got time for that &nbsp;  (‚ïØ¬∞‚ñ°¬∞)‚ïØÔ∏µ ‚îª‚îÅ‚îª
</p>


<p class="fragment (appear)">
<img src="./media/openqa_architecture.svg"/>
</p>

</section>
<section id="slide-org108ac1d-split">

<p>
<video id="video" src="./media/o3-test.mp4" controls/>
</p>

</section>
<section id="slide-org108ac1d-split">

<ul>
<li class="fragment appear">üëçÔ∏è Test the Happy Path</li>
<li class="fragment appear">üëéÔ∏è CI</li>
<li class="fragment appear">üëéÔ∏è Regression Testing</li>

</ul>


</section>
</section>
<section>
<section id="slide-org1cac2b1">
<h2 id="org1cac2b1">But wait there's more</h2>
<p>
<img src="./media/but-wait-theres-more.jpeg" height="500px"/>
</p>


</section>
<section id="slide-org72ca3b9">
<h3 id="org72ca3b9">Kiwi</h3>
<p class="fragment (appear)">
<img src="./media/kiwi-logo.png" height="50px" style="margin-bottom:-12px"/> Image Builder
</p>

<ul>
<li class="fragment appear">openSUSE's &amp; SUSE's image builder</li>
<li class="fragment appear">cross distribution support</li>

</ul>

</section>
<section id="slide-org78ea2b8">
<h3 id="org78ea2b8"><code>pbuild</code></h3>
<aside class="notes">
<ul>
<li>essentially the OBS backend powered by a single CLI</li>
<li>extremely powerful, but needs the same input as OBS</li>
<li>very, very underdocumented</li>
<li>fortunately, <code>osc cpc</code> is a thing</li>

</ul>

</aside>

<p class="fragment (appear)">
OBS, but on your <b>local</b> box
</p>

<p class="fragment (appear)">
<img src="./media/pbuild.png"/>
</p>


</section>
</section>
<section>
<section id="slide-orgf7b8d8f">
<h2 id="orgf7b8d8f">Packaging Philosophy</h2>
<aside class="notes">
<ul>
<li>some packaging ecosystems fully automated (Ruby, perl)</li>
<li>go, rust bundle by default &rArr; pragmatic</li>
<li></li>

</ul>

</aside>

<ul>
<li class="fragment appear">automation &gt; manual</li>
<li class="fragment appear">pragmatism &gt; purity</li>
<li class="fragment appear">a bit less colaboration (but it's getting besser)</li>

</ul>


</section>
</section>
<section>
<section id="slide-orgff3b152">
<h2 id="orgff3b152">The Factory Process</h2>
<aside class="notes">
<ul>
<li>how to submit to Factory</li>

</ul>

</aside>

<p class="fragment (appear)">
<img src="./media/factory-process.svg"/>
</p>


</section>
</section>
<section>
<section id="slide-org25e8af3">
<h2 id="org25e8af3">The openSUSE Community</h2>
<p class="fragment (appear)">
Governance: openSUSE Board
</p>

<p class="fragment (appear)">
Anything else?
</p>

<p class="fragment (appear)">
No üôÖ
</p>


</section>
</section>
<section>
<section id="slide-org92566d9">
<h2 id="org92566d9">Heroic Developers and Hidden Angels</h2>
<aside class="notes">
<ul>
<li>gives you all the tools</li>

</ul>

</aside>

<blockquote  class="fragment (appear)">
<p>
Those who do, decide.
</p>
</blockquote>


</section>
</section>
<section>
<section id="slide-org6f37fa1">
<h2 id="org6f37fa1">Conclusion</h2>
<p class="fragment (appear)">
Give those that can the tools to achieve greatness
</p>

<p class="fragment (appear)">
But don't leave the rest behind
</p>


</section>
</section>
<section>
<section id="slide-org3dc759c">
<h2 id="org3dc759c">Links</h2>
<ul>
<li><a href="https://build.opensuse.org/">build.opensuse.org</a></li>
<li><a href="https://openqa.opensuse.org/">openqa.opensuse.org</a></li>

</ul>

<p>
<img src="media/presentation-qr.svg" height="300px"/>
</p>

<p>
<i class="fa-solid fa-person-chalkboard"></i> <a href="https://github.com/dcermak/building-opensuse/">github.com/dcermak/building-opensuse</a>
</p>


</section>
</section>
<section>
<section id="slide-orgc94aa7b">
<h2 id="orgc94aa7b">Why even build a distribution?</h2>
<aside class="notes">
<p>
A distribution provides:
</p>

<ul>
<li>integration</li>
<li>keep packages working with each other</li>
<li>testing/QE</li>
<li>installers</li>
<li>opinionated defaults</li>

</ul>

</aside>

<p class="fragment appear">
Just <code>pip/npm/cargo install</code> everything!
</p>

<div class="org-src-container">

<pre  class="fragment appear"  ><code class="shell" >$ pip3 install pysqlite3
...
Failed to build pysqlite3
Installing collected packages: pysqlite3
  Running setup.py install for pysqlite3 ... error
  error: subprocess-exited-with-error

  √ó Running setup.py install for pysqlite3 did not run successfully.
</code></pre>
</div>

<p class="fragment appear">
oops ü´†
</p>

</section>
</section>
<section>
<section id="slide-org73a1f79">
<h2 id="org73a1f79">From Sources to an Installer</h2>
<aside class="notes">
<ul>
<li>just distributing sources isn't good enough anymore</li>

</ul>
<p>
&rarr; have to build &amp; distribute binaries
</p>

</aside>

<p class="fragment appear">
A long time ago‚Ä¶
</p>

<div class="org-src-container">

<pre  class="fragment appear"  ><code class="shell" >$ cat INSTALL

BASIC INSTALLATION

On most Unix systems, you build Emacs by first running the
'configure' shell script.  This attempts to deduce the
correct values for various system-dependent variables and
features, and find the directories where certain system
headers and libraries are kept.  In a few cases, you may
need to explicitly tell configure where to find some things,
or what options to use.
</code></pre>
</div>

<p class="fragment appear">
Ain't nobody got time for that &nbsp;  (‚ïØ¬∞‚ñ°¬∞)‚ïØÔ∏µ ‚îª‚îÅ‚îª
</p>


</section>
<section id="slide-org73a1f79-split">
<p>
<img src="./media/from-source-to-image.svg"/>
</p>


</section>
</section>
<section>
<section id="slide-org6fd3841">
<h2 id="org6fd3841">It starts with packages</h2>
<aside class="notes">
<ul>
<li>take upstream sources</li>
<li>add build instructions</li>
<li>add patches</li>
<li>custom config?</li>
<li>define dependencies, buildrequires, subpackages &amp; a lot of other metadata</li>

</ul>

</aside>


</section>
<section id="slide-org03c4e8e">
<h3 id="org03c4e8e">RPM packages</h3>
<p class="fragment (appear)">
<img src="./media/rpm-package.svg"/>
</p>


</section>
<section id="slide-orgfec66bf">
<h3 id="orgfec66bf">The people behind this</h3>
<p class="fragment (appear)">
Packaging Team
</p>
<ul>
<li class="fragment appear">update packages</li>
<li class="fragment appear">fix build &amp; test issues</li>
<li class="fragment appear">triage bugreports</li>
<li class="fragment appear">backport bugfixes</li>

</ul>


</section>
</section>
<section>
<section id="slide-org0841f43">
<h2 id="org0841f43">You said Dependencies?</h2>
<p class="fragment (appear)">
<img src="./media/dependencies.svg"/>
</p>


</section>
<section id="slide-org8306151">
<h3 id="org8306151">Dependency Hell üëø</h3>
<p class="fragment (appear)">
<img src="./media/factory-ring0.png"/>
</p>

</section>
<section id="slide-orgf2de3ff">
<h3 id="orgf2de3ff">Distribution Assembly</h3>
<aside class="notes">
<ul>
<li>how do you combine the distro mess into a working thing?</li>

</ul>

</aside>

<p class="fragment (appear)">
<img src="./media/releng.svg"/>
</p>


</section>
<section id="slide-org60aa12a">
<h3 id="org60aa12a">What's in a distribution?</h3>
<ul>
<li class="fragment appear"><i class="fa-solid fa-compact-disc"></i> installation ISOs</li>
<li class="fragment appear"><i class="fa-solid fa-hard-drive"></i> disk &amp; container images</li>
<li class="fragment appear"><i class="fa-solid fa-box-archive"></i> binary packages</li>
<li class="fragment appear">repositories</li>

</ul>


</section>
<section id="slide-orgea3c7f9">
<h3 id="orgea3c7f9">The Distribution Building Pipeline</h3>
<aside class="notes">
<ul>
<li>RPM building</li>
<li>repository assembly</li>
<li>image/container build</li>
<li>publishing</li>
<li>package monitoring</li>
<li>source control</li>

</ul>

</aside>

<p class="fragment (appear)">
<img src="./media/linux-distro-build-pipeline.svg"/>
</p>


</section>
<section id="slide-orgea136d4">
<h3 id="orgea136d4">Repository Assembly</h3>



</section>
<section id="slide-orga76269c">
<h3 id="orga76269c">The people behind this</h3>
<p class="fragment (appear)">
Release Engineering
</p>
<ul>
<li class="fragment appear">review package submissions &amp; assign to stagings</li>
<li class="fragment appear">review assembly &amp; integration issues</li>
<li class="fragment appear">review tests &amp; bugs</li>

</ul>


</section>
</section>
<section>
<section id="slide-org931068d">
<h2 id="org931068d">Build system</h2>
<div class="outline-text-2" id="text-org931068d">
</div>
</section>
<section id="slide-orgae6701d">
<h3 id="orgae6701d">The people behind this</h3>
<p class="fragment (appear)">
Buildservice and Buildops
</p>

<p class="fragment (appear)">
<i class="fa-brands fa-github"></i> <a href="https://github.com/openSUSE/open-build-service/"> openSUSE/open-build-service</a>
</p>

<ul>
<li class="fragment appear">develop the build service</li>
<li class="fragment appear">run the infrastructure</li>

</ul>


</section>
</section>
<section>
<section id="slide-orgbb0cd5e">
<h2 id="orgbb0cd5e">Testing/QE</h2>
<p class="fragment (appear)">
<img src="media/Ubuntu_4.10_kernel_panic.png" height="500px"/>
</p>



</section>
<section id="slide-org237622a">
<h3 id="org237622a">The people behind this</h3>
<p class="fragment (appear)">
QE &amp; Test tooling Team
</p>

<ul>
<li class="fragment appear">implement test cases</li>
<li class="fragment appear">improve test automation</li>
<li class="fragment appear">review test runs</li>
<li class="fragment appear">verify bugfixes</li>
<li class="fragment appear">manual testing</li>

</ul>


</section>
</section>
<section>
<section id="slide-org498496d">
<h2 id="org498496d">Infrastructure</h2>
<p class="fragment (appear)">
<img src="./media/servers-on-fire.png" height="500px"/>
</p>

</section>
<section id="slide-org498496d-split">

<p class="fragment (appear)">
 <i class="fa-brands fa-opensuse"></i> <a href="https://en.opensuse.org/openSUSE:Heroes"> openSUSE Heroes</a>
</p>

<ul>
<li class="fragment appear">run the infrastructure</li>
<li class="fragment appear">maintain automation</li>
<li class="fragment appear">moderation</li>

</ul>
</section>
</section>
</div>
</div>
<script src="./node_modules/reveal.js/dist/reveal.js"></script>
<script src="./node_modules/reveal.js/plugin/highlight/highlight.js"></script>
<script src="./node_modules/reveal.js/plugin/notes/notes.js"></script>


<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
plugins: [RevealHighlight, RevealNotes, history],
transition: 'none', hash: true
});

</script>
</body>
</html>
